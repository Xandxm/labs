#include <iostream>
#include <cstdlib>
using namespace std;

// Функция для поиска колонок с нулевыми элементами
int* findZeroColumns(int** matrix, int rows, int cols, int &zeroCount) {
    zeroCount = 0;
    int* zeroCols = (int*)malloc(cols * sizeof(int));
    if (!zeroCols) return nullptr; // защита от malloc

    for (int j = 0; j < cols; ++j) {
        for (int i = 0; i < rows; ++i) {
            if (matrix[i][j] == 0) {
                zeroCols[zeroCount++] = j;
                break;
            }
        }
    }

    if (zeroCount == 0) {
        free(zeroCols);
        return nullptr;
    }

    return zeroCols;
}

// Функция удаления столбцов
void removeColumns(int** &matrix, int &rows, int &cols, int* zeroCols, int zeroCount) {
    if (!zeroCols || zeroCount == 0) return;

    int newCols = cols - zeroCount;
    int** newMatrix = (int**)malloc(rows * sizeof(int*));
    for (int i = 0; i < rows; ++i) {
        newMatrix[i] = (int*)malloc(newCols * sizeof(int));
        int k = 0;
        for (int j = 0; j < cols; ++j) {
            bool isZeroCol = false;
            for (int z = 0; z < zeroCount; ++z) {
                if (j == zeroCols[z]) {
                    isZeroCol = true;
                    break;
                }
            }
            if (!isZeroCol) newMatrix[i][k++] = matrix[i][j];
        }
        free(matrix[i]);
    }
    free(matrix);
    matrix = newMatrix;
    cols = newCols;
}

int main() {
    int A, B, C, D;

    do { cout << "Введите количество строк для добавления (A): "; cin >> A; } while (A < 0);
    do { cout << "Введите количество столбцов для добавления (B): "; cin >> B; } while (B < 0);
    cout << "Введите коэффициенты C и D: "; cin >> C >> D;

    int initialRows = 2, initialCols = 2;
    int** matrix = (int**)malloc(initialRows * sizeof(int*));
    for (int i = 0; i < initialRows; ++i) {
        matrix[i] = (int*)malloc(initialCols * sizeof(int));
        for (int j = 0; j < initialCols; ++j) {
            cout << "Введите элемент [" << i << "][" << j << "]: ";
            cin >> matrix[i][j];
        }
    }

    int newRows = initialRows + A;
    int newCols = initialCols + B;
    int** newMatrix = (int**)malloc(newRows * sizeof(int*));
    for (int i = 0; i < newRows; ++i) {
        newMatrix[i] = (int*)malloc(newCols * sizeof(int));
        for (int j = 0; j < newCols; ++j) {
            newMatrix[i][j] = (i - A) * C + (j - B + 1) * D;
        }
    }

    // Поиск колонок с нулями
    int zeroCount = 0;
    int* zeroCols = findZeroColumns(newMatrix, newRows, newCols, zeroCount);

    // Удаляем колонки, только если есть что удалять
    if (zeroCols != nullptr) {
        removeColumns(newMatrix, newRows, newCols, zeroCols, zeroCount);
        free(zeroCols);
    }

    cout << "Результирующая матрица:" << endl;
    for (int i = 0; i < newRows; ++i) {
        for (int j = 0; j < newCols; ++j) cout << newMatrix[i][j] << "\t";
        cout << endl;
        free(newMatrix[i]);
    }
    free(newMatrix);

    // Пункт 2 – указатели
    double a, b;
    cout << "Введите два вещественных числа a и b: ";
    cin >> a >> b;
    double* pa = &a;
    double* pb = &b;

    *pa *= 3;  // увеличиваем a в 3 раза
    double temp = *pa;
    *pa = *pb; // меняем местами
    *pb = temp;

    cout << "После преобразования: a = " << a << ", b = " << b << endl;

    return 0;
}