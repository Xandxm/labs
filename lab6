#include <iostream>
#include <cstdlib> // для malloc, calloc, realloc, free
using namespace std;

// Функция для преобразования матрицы
int* findZeroColumns(int** &matrix, int rows, int cols, int &zeroCount) {
    zeroCount = 0;
    int* zeroCols = (int*)malloc(cols * sizeof(int));

    // Ищем колонки с нулевыми элементами
    for (int j = 0; j < cols; ++j) {
        for (int i = 0; i < rows; ++i) {
            if (matrix[i][j] == 0) {
                zeroCols[zeroCount++] = j;
                break;
            }
        }
    }
    return zeroCols;
}

// Функция удаления столбцов по индексам
void removeColumns(int** &matrix, int &rows, int &cols, int* zeroCols, int zeroCount) {
    int newCols = cols - zeroCount;
    int** newMatrix = (int**)malloc(rows * sizeof(int*));
    for (int i = 0; i < rows; ++i) {
        newMatrix[i] = (int*)malloc(newCols * sizeof(int));
        int k = 0;
        for (int j = 0; j < cols; ++j) {
            bool isZeroCol = false;
            for (int z = 0; z < zeroCount; ++z) {
                if (j == zeroCols[z]) {
                    isZeroCol = true;
                    break;
                }
            }
            if (!isZeroCol) {
                newMatrix[i][k++] = matrix[i][j];
            }
        }
        free(matrix[i]);
    }
    free(matrix);
    matrix = newMatrix;
    cols = newCols;
}

int main() {
    int A, B, C, D;

    // Ввод с проверкой
    do {
        cout << "Введите количество строк для добавления (A): ";
        cin >> A;
    } while (A < 0);

    do {
        cout << "Введите количество столбцов для добавления (B): ";
        cin >> B;
    } while (B < 0);

    cout << "Введите коэффициенты C и D: ";
    cin >> C >> D;

    // Создаем 2x2 массив
    int initialRows = 2, initialCols = 2;
    int** matrix = (int**)malloc(initialRows * sizeof(int*));
    for (int i = 0; i < initialRows; ++i) {
        matrix[i] = (int*)malloc(initialCols * sizeof(int));
        for (int j = 0; j < initialCols; ++j) {
            cout << "Введите элемент [" << i << "][" << j << "]: ";
            cin >> matrix[i][j];
        }
    }

    // Создаем новую матрицу с добавленными строками и столбцами
    int newRows = initialRows + A;
    int newCols = initialCols + B;
    int** newMatrix = (int**)malloc(newRows * sizeof(int*));
    for (int i = 0; i < newRows; ++i) {
        newMatrix[i] = (int*)malloc(newCols * sizeof(int));
        for (int j = 0; j < newCols; ++j) {
            newMatrix[i][j] = (i - A) * C + (j - B + 1) * D; // формула из примера
        }
    }

    // Передаем в функцию
    int zeroCount;
    int* zeroCols = findZeroColumns(newMatrix, newRows, newCols, zeroCount);

    // Удаляем столбцы с нулями
    removeColumns(newMatrix, newRows, newCols, zeroCols, zeroCount);
    free(zeroCols);

    // Выводим результат
    cout << "Результирующая матрица:" << endl;
    for (int i = 0; i < newRows; ++i) {
        for (int j = 0; j < newCols; ++j) {
            cout << newMatrix[i][j] << "\t";
        }
        cout << endl;
        free(newMatrix[i]);
    }
    free(newMatrix);

    // Пункт 2 – указатели
    double a, b;
    cout << "Введите два вещественных числа a и b: ";
    cin >> a >> b;

    double* pa = &a;
    double* pb = &b;

    // Увеличиваем a в 3 раза через указатель
    *pa *= 3;

    // Меняем местами через указатели
    double temp = *pa;
    *pa = *pb;
    *pb = temp;

    cout << "После преобразования: a = " << a << ", b = " << b << endl;

    return 0;
}